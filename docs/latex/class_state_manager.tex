\doxysection{State\+Manager Class Reference}
\hypertarget{class_state_manager}{}\label{class_state_manager}\index{StateManager@{StateManager}}


Manages the current and next game states.  




{\ttfamily \#include $<$State\+Manager.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_game_state}{Game\+State}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{class_state_manager_aeb24049cbe185fe0faec5c771e34c2bb}{Get\+Current\+State}} () const
\begin{DoxyCompactList}\small\item\em Returns the currently active \doxylink{class_game_state}{Game\+State}. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_state_manager_a5337ecd1c035794817b1de05f961d352}{Change\+State}} (std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_game_state}{Game\+State}} $>$ new\+State)
\begin{DoxyCompactList}\small\item\em Schedules a new \doxylink{class_game_state}{Game\+State} to be activated. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_state_manager_ab4ebd3189a4623e805d95f768b314acb}{Update}} (float dt, const \mbox{\hyperlink{struct_engine_context}{Engine\+Context}} \&engine\+Context)
\begin{DoxyCompactList}\small\item\em Updates the active state and performs pending transitions. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_state_manager_ae161e57265af366c58b0e2b5d936553d}{Draw}} (const \mbox{\hyperlink{struct_engine_context}{Engine\+Context}} \&engine\+Context)
\begin{DoxyCompactList}\small\item\em Draws the currently active state. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_state_manager_aa8e5c183bf725b7132f7e4bc800deaab}{Free}} (const \mbox{\hyperlink{struct_engine_context}{Engine\+Context}} \&engine\+Context)
\begin{DoxyCompactList}\small\item\em Releases memory of both current and next states. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
friend \mbox{\hyperlink{class_state_manager_a2d51b51c9cf169dca9ae37291ad26a39}{SNAKE\+\_\+\+Engine}}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_game_state}{Game\+State}} $>$ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{current\+State}}
\item 
std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_game_state}{Game\+State}} $>$ \mbox{\hyperlink{class_state_manager_a598a8e8b997a38333b28dbbe9c87cfe6}{next\+State}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Manages the current and next game states. 

\doxylink{class_state_manager}{State\+Manager} owns the active \doxylink{class_game_state}{Game\+State} and handles transitions to the next one. It allows only one active state at a time, but supports scheduling a new state to be swapped in at the beginning of the next update cycle.

State transitions are deferred to avoid accessing deleted states during execution.

This class is updated every frame by the engine.


\begin{DoxyCode}{0}
\DoxyCodeLine{engineContext.stateManager-\/>ChangeState(std::make\_unique<MainMenuState>());}
\DoxyCodeLine{engineContext.stateManager-\/>Update(dt,\ engineContext);}
\DoxyCodeLine{engineContext.stateManager-\/>Draw(engineContext);}

\end{DoxyCode}
 

Definition at line \mbox{\hyperlink{_state_manager_8h_source_l00026}{26}} of file \mbox{\hyperlink{_state_manager_8h_source}{State\+Manager.\+h}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{class_state_manager_a5337ecd1c035794817b1de05f961d352}\index{StateManager@{StateManager}!ChangeState@{ChangeState}}
\index{ChangeState@{ChangeState}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{ChangeState()}{ChangeState()}}
{\footnotesize\ttfamily \label{class_state_manager_a5337ecd1c035794817b1de05f961d352} 
void State\+Manager\+::\+Change\+State (\begin{DoxyParamCaption}\item[{std\+::unique\+\_\+ptr$<$ \mbox{\hyperlink{class_game_state}{Game\+State}} $>$}]{new\+State}{}\end{DoxyParamCaption})}



Schedules a new \doxylink{class_game_state}{Game\+State} to be activated. 

The switch does not happen immediately. Instead, the new state is stored internally and the swap occurs at the start of the next call to \doxylink{class_state_manager_ab4ebd3189a4623e805d95f768b314acb}{Update()}. This avoids modifying the state mid-\/frame.


\begin{DoxyParams}{Parameters}
{\em new\+State} & A unique\+\_\+ptr to the new \doxylink{class_game_state}{Game\+State} to use next frame.\\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{stateManager-\/>ChangeState(std::make\_unique<PlayState>());}

\end{DoxyCode}
 

Definition at line \mbox{\hyperlink{_state_manager_8cpp_source_l00011}{11}} of file \mbox{\hyperlink{_state_manager_8cpp_source}{State\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00012\ \{}
\DoxyCodeLine{00013\ \ \ \ \ \mbox{\hyperlink{class_state_manager_a598a8e8b997a38333b28dbbe9c87cfe6}{nextState}}\ =\ std::move(newState);}
\DoxyCodeLine{00014\ \}}

\end{DoxyCode}
\Hypertarget{class_state_manager_ae161e57265af366c58b0e2b5d936553d}\index{StateManager@{StateManager}!Draw@{Draw}}
\index{Draw@{Draw}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{Draw()}{Draw()}}
{\footnotesize\ttfamily \label{class_state_manager_ae161e57265af366c58b0e2b5d936553d} 
void State\+Manager\+::\+Draw (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_engine_context}{Engine\+Context}} \&}]{engine\+Context}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Draws the currently active state. 

Invokes \doxylink{class_state_manager_ae161e57265af366c58b0e2b5d936553d}{Draw()} on the current \doxylink{class_game_state}{Game\+State}, if any is loaded.


\begin{DoxyParams}{Parameters}
{\em engine\+Context} & Provides rendering and resource access. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_state_manager_8cpp_source_l00036}{36}} of file \mbox{\hyperlink{_state_manager_8cpp_source}{State\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00037\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00039\ \ \ \ \ \{}
\DoxyCodeLine{00040\ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>Draw(engineContext);}
\DoxyCodeLine{00041\ \ \ \ \ engineContext.\mbox{\hyperlink{struct_engine_context_a8f4c861adc4684975fa767ae4723e095}{renderManager}}-\/>\mbox{\hyperlink{class_render_manager_aff85070eef9769739f2478fd5b86da87}{FlushDrawCommands}}();}
\DoxyCodeLine{00042\ \ \ \ \ \}}
\DoxyCodeLine{00043\ \}}

\end{DoxyCode}
\Hypertarget{class_state_manager_aa8e5c183bf725b7132f7e4bc800deaab}\index{StateManager@{StateManager}!Free@{Free}}
\index{Free@{Free}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{Free()}{Free()}}
{\footnotesize\ttfamily \label{class_state_manager_aa8e5c183bf725b7132f7e4bc800deaab} 
void State\+Manager\+::\+Free (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{struct_engine_context}{Engine\+Context}} \&}]{engine\+Context}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Releases memory of both current and next states. 

Called when shutting down the engine to clean up any loaded Game\+States.


\begin{DoxyParams}{Parameters}
{\em engine\+Context} & Used for cleanup calls to each \doxylink{class_game_state}{Game\+State}. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_state_manager_8cpp_source_l00045}{45}} of file \mbox{\hyperlink{_state_manager_8cpp_source}{State\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00046\ \{}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00048\ \ \ \ \ \{}
\DoxyCodeLine{00049\ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemFree(engineContext);}
\DoxyCodeLine{00050\ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemUnload(engineContext);}
\DoxyCodeLine{00051\ \ \ \ \ \}}
\DoxyCodeLine{00052\ \}}

\end{DoxyCode}
\Hypertarget{class_state_manager_aeb24049cbe185fe0faec5c771e34c2bb}\index{StateManager@{StateManager}!GetCurrentState@{GetCurrentState}}
\index{GetCurrentState@{GetCurrentState}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{GetCurrentState()}{GetCurrentState()}}
{\footnotesize\ttfamily \label{class_state_manager_aeb24049cbe185fe0faec5c771e34c2bb} 
\mbox{\hyperlink{class_game_state}{Game\+State}} \texorpdfstring{$\ast$}{*} State\+Manager\+::\+Get\+Current\+State (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [nodiscard]}}



Returns the currently active \doxylink{class_game_state}{Game\+State}. 

Used to query the state currently being updated and rendered. May return nullptr if no state is loaded.

\begin{DoxyReturn}{Returns}
Raw pointer to the active \doxylink{class_game_state}{Game\+State}. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_state_manager_8cpp_source_l00006}{6}} of file \mbox{\hyperlink{_state_manager_8cpp_source}{State\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00007\ \{}
\DoxyCodeLine{00008\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}\ ?\ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}.get()\ :\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00009\ \}}

\end{DoxyCode}
\Hypertarget{class_state_manager_ab4ebd3189a4623e805d95f768b314acb}\index{StateManager@{StateManager}!Update@{Update}}
\index{Update@{Update}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{Update()}{Update()}}
{\footnotesize\ttfamily \label{class_state_manager_ab4ebd3189a4623e805d95f768b314acb} 
void State\+Manager\+::\+Update (\begin{DoxyParamCaption}\item[{float}]{dt}{, }\item[{const \mbox{\hyperlink{struct_engine_context}{Engine\+Context}} \&}]{engine\+Context}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Updates the active state and performs pending transitions. 

If a new state has been queued via \doxylink{class_state_manager_a5337ecd1c035794817b1de05f961d352}{Change\+State()}, it is swapped in here. Then the current state\textquotesingle{}s \doxylink{class_state_manager_ab4ebd3189a4623e805d95f768b314acb}{Update()} is called.


\begin{DoxyParams}{Parameters}
{\em dt} & Delta time since the last frame. \\
\hline
{\em engine\+Context} & Engine services and system access. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_state_manager_8cpp_source_l00016}{16}} of file \mbox{\hyperlink{_state_manager_8cpp_source}{State\+Manager.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00017\ \{}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_state_manager_a598a8e8b997a38333b28dbbe9c87cfe6}{nextState}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00019\ \ \ \ \ \{}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00021\ \ \ \ \ \{}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemFree(engineContext);}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemUnload(engineContext);}
\DoxyCodeLine{00024\ \ \ \ \ \}}
\DoxyCodeLine{00025\ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}\ =\ std::move(\mbox{\hyperlink{class_state_manager_a598a8e8b997a38333b28dbbe9c87cfe6}{nextState}});}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemLoad(engineContext);}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemInit(engineContext);}
\DoxyCodeLine{00028\ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>GetCameraManager().SetScreenSizeForAll(engineContext.\mbox{\hyperlink{struct_engine_context_ab6fa006055c2a224931059f7ed840bed}{windowManager}}-\/>\mbox{\hyperlink{class_window_manager_ad8e16ad88c8eb3e3889d5c3dbe7891cb}{GetWidth}}(),\ engineContext.\mbox{\hyperlink{struct_engine_context_ab6fa006055c2a224931059f7ed840bed}{windowManager}}-\/>\mbox{\hyperlink{class_window_manager_a50c9f12a67f69e822b4e70077773c9ca}{GetHeight}}());}
\DoxyCodeLine{00029\ \ \ \ \ \}}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}\ !=\ \textcolor{keyword}{nullptr})}
\DoxyCodeLine{00031\ \ \ \ \ \{}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{class_state_manager_a23b9db8ba856509ed476ed1144247b83}{currentState}}-\/>SystemUpdate(dt,\ engineContext);}
\DoxyCodeLine{00033\ \ \ \ \ \}}
\DoxyCodeLine{00034\ \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\Hypertarget{class_state_manager_a23b9db8ba856509ed476ed1144247b83}\index{StateManager@{StateManager}!currentState@{currentState}}
\index{currentState@{currentState}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{currentState}{currentState}}
{\footnotesize\ttfamily \label{class_state_manager_a23b9db8ba856509ed476ed1144247b83} 
std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{class_game_state}{Game\+State}}$>$ State\+Manager\+::current\+State\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_state_manager_8h_source_l00090}{90}} of file \mbox{\hyperlink{_state_manager_8h_source}{State\+Manager.\+h}}.

\Hypertarget{class_state_manager_a598a8e8b997a38333b28dbbe9c87cfe6}\index{StateManager@{StateManager}!nextState@{nextState}}
\index{nextState@{nextState}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{nextState}{nextState}}
{\footnotesize\ttfamily \label{class_state_manager_a598a8e8b997a38333b28dbbe9c87cfe6} 
std\+::unique\+\_\+ptr$<$\mbox{\hyperlink{class_game_state}{Game\+State}}$>$ State\+Manager\+::next\+State\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_state_manager_8h_source_l00091}{91}} of file \mbox{\hyperlink{_state_manager_8h_source}{State\+Manager.\+h}}.

\Hypertarget{class_state_manager_a2d51b51c9cf169dca9ae37291ad26a39}\index{StateManager@{StateManager}!SNAKE\_Engine@{SNAKE\_Engine}}
\index{SNAKE\_Engine@{SNAKE\_Engine}!StateManager@{StateManager}}
\doxysubsubsection{\texorpdfstring{SNAKE\_Engine}{SNAKE\_Engine}}
{\footnotesize\ttfamily \label{class_state_manager_a2d51b51c9cf169dca9ae37291ad26a39} 
friend State\+Manager\+::\+SNAKE\+\_\+\+Engine\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_state_manager_8h_source_l00028}{28}} of file \mbox{\hyperlink{_state_manager_8h_source}{State\+Manager.\+h}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Project/\+SNAKE\+\_\+\+Engine/\+Public/\mbox{\hyperlink{_state_manager_8h}{State\+Manager.\+h}}\item 
Project/\+SNAKE\+\_\+\+Engine/\+Private/\mbox{\hyperlink{_state_manager_8cpp}{State\+Manager.\+cpp}}\end{DoxyCompactItemize}
